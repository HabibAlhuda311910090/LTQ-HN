(function(a){function t(t){for(var r,i,o=t[0],l=t[1],c=t[2],u=0,m=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(a[r]=l[r]);d&&d(t);while(m.length)m.shift()();return n.push.apply(n,c||[]),e()}function e(){for(var a,t=0;t<n.length;t++){for(var e=n[t],r=!0,i=1;i<e.length;i++){var l=e[i];0!==s[l]&&(r=!1)}r&&(n.splice(t--,1),a=o(o.s=e[0]))}return a}var r={},s={app:0},n=[];function i(a){return o.p+"js/"+({}[a]||a)+"."+{"chunk-23bdc2dc":"d3441e25","chunk-2d216214":"dda534f6","chunk-2d216257":"69e90091"}[a]+".js"}function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.e=function(a){var t=[],e=s[a];if(0!==e)if(e)t.push(e[2]);else{var r=new Promise((function(t,r){e=s[a]=[t,r]}));t.push(e[2]=r);var n,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=i(a);var c=new Error;n=function(t){l.onerror=l.onload=null,clearTimeout(u);var e=s[a];if(0!==e){if(e){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;c.message="Loading chunk "+a+" failed.\n("+r+": "+n+")",c.name="ChunkLoadError",c.type=r,c.request=n,e[1](c)}s[a]=void 0}};var u=setTimeout((function(){n({type:"timeout",target:l})}),12e4);l.onerror=l.onload=n,document.head.appendChild(l)}return Promise.all(t)},o.m=a,o.c=r,o.d=function(a,t,e){o.o(a,t)||Object.defineProperty(a,t,{enumerable:!0,get:e})},o.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,t){if(1&t&&(a=o(a)),8&t)return a;if(4&t&&"object"===typeof a&&a&&a.__esModule)return a;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:a}),2&t&&"string"!=typeof a)for(var r in a)o.d(e,r,function(t){return a[t]}.bind(null,r));return e},o.n=function(a){var t=a&&a.__esModule?function(){return a["default"]}:function(){return a};return o.d(t,"a",t),t},o.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},o.p="/Haen-cloudy/",o.oe=function(a){throw console.error(a),a};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;n.push([1,"chunk-vendors"]),e()})({0:function(a,t){},"06fb":function(a,t,e){},"0a91":function(a,t,e){},"0c64":function(a,t,e){"use strict";e("4837")},1:function(a,t,e){a.exports=e("56d7")},"1af0":function(a,t,e){"use strict";e("06fb")},"1ba2":function(a,t,e){},2:function(a,t){},"27b0":function(a,t,e){},3:function(a,t){},3031:function(a,t,e){},"3abf":function(a,t,e){"use strict";e("1ba2")},4837:function(a,t,e){},"4bb3":function(a,t,e){},"56d7":function(a,t,e){"use strict";e.r(t),e.d(t,"db",(function(){return At})),e.d(t,"storage",(function(){return Bt}));var r=e("2b0e"),s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("router-view")},n=[],i=e("2877"),o={},l=Object(i["a"])(o,s,n,!1,null,null,null),c=l.exports,u=e("58ca"),d=e("f309");r["a"].use(d["a"]);var m=new d["a"]({}),p=e("8c4f"),h=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-app",{attrs:{id:"app"}},[e("v-main",[e("router-view")],1)],1)},v=[],f=e("2f62"),g={name:"AppLayout",data(){return{drawer:null}},computed:{...Object(f["b"])({identity:"auth/identity",titleHierarchy:"auth/titleHierarchy"})},async mounted(){},methods:{}},b=g,k=e("6544"),y=e.n(k),w=e("7496"),x=e("f6c4"),C=Object(i["a"])(b,h,v,!1,null,null,null),_=C.exports;y()(C,{VApp:w["a"],VMain:x["a"]});var T=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",{staticClass:"mb-5"},[e("v-app-bar",{staticClass:"green",attrs:{app:"",dark:""}},[e("v-card-title",{staticClass:"headline"},[e("img",{staticClass:"logo-small",attrs:{src:"/Haen-cloudy/favicon.ico",alt:"Logo"}}),a._v(" LTQ-HN ")]),e("v-toolbar-title",{staticClass:"ml-8 clickable",on:{click:a.navigateHome}},[a._v("Home")]),a.isAdmin?e("v-toolbar-title",{staticClass:"ml-8 clickable",on:{click:a.navigateDashboard}},[a._v("Dashboard")]):a._e(),e("v-spacer"),a.userData?e("v-toolbar-title",[a._v(" Selamat Datang, "+a._s(a.userData.displayName)+" ")]):a._e(),e("v-spacer"),e("v-btn",{staticClass:"mr-8",attrs:{color:"error",dark:""},on:{click:a.logout}},[a._v("Log Out")])],1),a.login?e("v-row",a._l(a.menus,(function(t){return e("v-col",{key:t.title,attrs:{cols:"12",sm:"12",md:"12",lg:"4"}},[e("v-card",{staticClass:"menu-card",on:{click:function(e){return a.navigate(t.route)}}},[e("v-img",{staticClass:"menu-icon",attrs:{src:t.icon}}),e("v-card-title",{staticClass:"menu-title"},[a._v(a._s(t.title))])],1)],1)})),1):a._e(),a.login?a._e():e("v-row")],1)},D=[],L=e("3d20"),S=e.n(L),V=e("260b"),j=(e("ea7b"),{name:"Home",data(){return{userData:null,login:!0,isAdmin:!1,menus:[{title:"Absen Pagi",icon:"/Haen-cloudy/images/CheckIn.jpg",route:"/checkin"},{title:"Absen Sore",icon:"/Haen-cloudy/images/CheckOut.jpg",route:"/checkout"},{title:"Report Hafalan",icon:"/Haen-cloudy/images/AllList.jpg",route:"/hafalan"}]}},methods:{navigate(a){this.$router.push(a)},navigateDashboard(){this.$router.push("/dashboard")},navigateHome(){this.$router.push("/home")},logout(){S.a.fire({title:"Konfirmasi",text:"Anda yakin ingin keluar?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Keluar",cancelButtonText:"Batal"}).then(a=>{a.isConfirmed&&(localStorage.clear(),this.$router.push("/login"))})},async fetchUserData(){const a=V["a"].auth().currentUser;if(a){const t=await At.collection("registrations").where("email","==",a.email).get();t.empty||(this.userData=t.docs[0].data())}}},created(){this.fetchUserData(),this.isAdmin="Admin"===localStorage.role}}),K=j,E=(e("f5db"),e("40dc")),$=e("8336"),N=e("b0af"),A=e("99d9"),B=e("62ad"),I=e("a523"),H=e("adda"),U=e("0fd9"),O=e("2fa4"),R=e("2a7f"),F=Object(i["a"])(K,T,D,!1,null,"57d62a5a",null),P=F.exports;y()(F,{VAppBar:E["a"],VBtn:$["a"],VCard:N["a"],VCardTitle:A["d"],VCol:B["a"],VContainer:I["a"],VImg:H["a"],VRow:U["a"],VSpacer:O["a"],VToolbarTitle:R["a"]});var M=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("v-form",{attrs:{name:"login-form"}},[e("v-container",[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{lg:"3",md:"4",sm:"6"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[e("img",{staticClass:"logo-small",attrs:{src:"/Haen-cloudy/favicon.ico",alt:"Logo"}})]),e("v-card-subtitle",{staticClass:"title text-center"},[a._v("Login")]),e("v-card-text",[e("v-text-field",{attrs:{label:"E-mail"},model:{value:a.input.username,callback:function(t){a.$set(a.input,"username",t)},expression:"input.username"}}),e("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:a.input.password,callback:function(t){a.$set(a.input,"password",t)},expression:"input.password"}}),e("v-row",{attrs:{justify:"center"}},[e("v-btn",{staticClass:"mx-2 button-login",attrs:{color:"green",dark:""},on:{click:function(t){return t.preventDefault(),a.login.apply(null,arguments)}}},[a._v("Login")])],1)],1)],1)],1)],1)],1)],1)],1)},J=[],q=e("2591"),z={name:"LoginView",data(){return{input:{username:"",password:""}}},methods:{...Object(f["c"])(["setUserRole"]),login(){""!==this.input.username&&""!==this.input.password?(console.log("authenticated"),q["a"].auth().signInWithEmailAndPassword(this.input.username,this.input.password).then(a=>{console.log("Successfully logged in!",a),this.showHomePage(),this.setRole()}).catch(a=>{console.log(a.code),S.a.fire({title:"Login Error",text:"Invalid email or password",icon:"error",confirmButtonText:"OK"})})):console.log("Username and Password cannot be empty")},showHomePage(){S.a.fire({title:"Login Success",icon:"success",timer:1e4,showConfirmButton:!1}).then(()=>{this.$router.push("/home")})},setRole(){console.log("masuk setRole");const a=q["a"].auth().currentUser;a&&(console.log(a.email),At.collection("registrations").where("email","==",a.email).get().then(a=>{a.forEach(a=>{const t=a.data();console.log(t),localStorage.setItem("role",t.jabatan)})}).catch(a=>{console.error("Error getting registrations:",a)}))}}},G=z,Q=(e("b044"),e("4bd4")),Y=e("8654"),W=Object(i["a"])(G,M,J,!1,null,null,null),Z=W.exports;y()(W,{VBtn:$["a"],VCard:N["a"],VCardSubtitle:A["b"],VCardText:A["c"],VCardTitle:A["d"],VCol:B["a"],VContainer:I["a"],VForm:Q["a"],VRow:U["a"],VTextField:Y["a"]});var X=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",{attrs:{fluid:""}},[e("v-app-bar",{staticClass:"green",attrs:{app:"",dark:""}},[e("v-card-title",{staticClass:"headline"},[e("v-btn",{attrs:{color:"orange"},on:{click:a.goBack}},[a._v(" Back ")]),e("img",{staticClass:"logo-small",attrs:{src:"/Haen-cloudy/favicon.ico",alt:"Logo"}}),a._v(" LTQ-HN ")],1),e("v-spacer")],1),e("v-row",{attrs:{justify:"center"}},[e("v-col",{attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[e("v-card",{staticClass:"register-card"},[e("v-card-title",{staticClass:"headline"},[a._v("Register")]),e("v-card-text",[e("v-form",{on:{submit:function(t){return t.preventDefault(),a.register.apply(null,arguments)}}},[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"E-mail",required:""},model:{value:a.input.email,callback:function(t){a.$set(a.input,"email",t)},expression:"input.email"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:a.input.password,callback:function(t){a.$set(a.input,"password",t)},expression:"input.password"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Nama",required:""},model:{value:a.input.displayName,callback:function(t){a.$set(a.input,"displayName",t)},expression:"input.displayName"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-select",{attrs:{label:"Jenis Kelamin",items:["-- Pilih Jenis Kelamin --","Laki-Laki","Perempuan"],rules:a.jenisKelaminRules,required:""},model:{value:a.input.jenisKelamin,callback:function(t){a.$set(a.input,"jenisKelamin",t)},expression:"input.jenisKelamin"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Tanggal Lahir",type:"date",required:""},model:{value:a.input.tanggalLahir,callback:function(t){a.$set(a.input,"tanggalLahir",t)},expression:"input.tanggalLahir"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"No. Telp",required:""},model:{value:a.input.noTelp,callback:function(t){a.$set(a.input,"noTelp",t)},expression:"input.noTelp"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-select",{attrs:{label:"Jabatan",items:["-- Pilih Jabatan --","Admin","Ustad"],rules:a.jabatanRules,required:""},model:{value:a.input.jabatan,callback:function(t){a.$set(a.input,"jabatan",t)},expression:"input.jabatan"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Alamat",required:""},model:{value:a.input.alamat,callback:function(t){a.$set(a.input,"alamat",t)},expression:"input.alamat"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-file-input",{attrs:{label:"Foto",accept:"image/*"},model:{value:a.input.foto,callback:function(t){a.$set(a.input,"foto",t)},expression:"input.foto"}})],1)],1),e("v-row",{staticClass:"text-center"},[e("v-col",{attrs:{cols:"12"}},[e("v-btn",{staticClass:"mx-2",attrs:{color:"red",dark:""},on:{click:a.cancel}},[a._v("Cancel")]),e("v-btn",{staticClass:"mx-2",attrs:{color:"primary",type:"submit"}},[a._v("Register")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},aa=[],ta={name:"RegisterView",data(){return{input:{email:"",password:"",displayName:"",jenisKelamin:"",tanggalLahir:"",noTelp:"",jabatan:"",alamat:"",foto:null},jenisKelaminRules:[a=>!!a||"Jenis kelamin harus dipilih",a=>"-- Pilih Jenis Kelamin --"!==a||"Jenis kelamin harus dipilih"],jabatanRules:[a=>!!a||"Jabatan harus dipilih",a=>"-- Pilih Jabatan --"!==a||"Jabatan harus dipilih"]}},methods:{...Object(f["c"])(["setUserRole"]),async uploadFoto(a){try{const t=this.input.email,e=t+"_"+a.name,r=Bt.ref().child(e),s=await r.put(a),n=await s.ref.getDownloadURL();this.input.foto=n}catch(t){console.error("Error uploading photo:",t)}},goBack(){this.$router.push("/dashboard")},async register(){if(this.input.email&&this.input.password&&this.input.displayName&&this.input.jenisKelamin&&this.input.tanggalLahir&&this.input.noTelp&&this.input.jabatan&&this.input.alamat&&this.input.foto)try{const{user:a}=await V["a"].auth().createUserWithEmailAndPassword(this.input.email,this.input.password);await this.uploadFoto(this.input.foto);const t={email:this.input.email,password:this.input.password,displayName:this.input.displayName,jenisKelamin:this.input.jenisKelamin,tanggalLahir:this.input.tanggalLahir,noTelp:this.input.noTelp,jabatan:this.input.jabatan,alamat:this.input.alamat,foto:this.input.foto};await At.collection("registrations").add(t),await a.updateProfile({displayName:this.input.displayName.replace(/\s/g,"_")}),await this.setRoleBasedOnJabatan(this.input.jabatan),this.input={email:"",password:"",displayName:"",jenisKelamin:"",tanggalLahir:"",noTelp:"",jabatan:"",alamat:"",foto:null},S.a.fire({icon:"success",title:"Registration successful. Please login.",showConfirmButton:!1,timer:2e3}),this.$router.push("/login")}catch(a){console.error("Registration error:",a.code,a.message)}else S.a.fire("Please fill in all fields.")},async setRoleBasedOnJabatan(a){try{const t=this.input.email;"Admin"===a?(await At.collection("roles").doc(t).set({role:"admin"}),this.setUserRole("admin")):"Ustad"===a&&(await At.collection("roles").doc(t).set({role:"usatad"}),this.setUserRole("ustad"))}catch(t){console.error("Error setting role:",t),S.a.fire({icon:"error",title:"Oops...",text:"Terjadi kesalahan saat menyetel peran!",footer:"Silakan coba lagi atau hubungi dukungan jika masalah berlanjut."})}},cancel(){this.input={username:"",password:"",displayName:"",jenisKelamin:"",tanggalLahir:"",noTelp:"",jabatan:"",alamat:"",foto:null},this.$router.push("/dashboard")}}},ea=ta,ra=(e("ab48"),e("23a7")),sa=e("b974"),na=Object(i["a"])(ea,X,aa,!1,null,"09c9c8d5",null),ia=na.exports;y()(na,{VAppBar:E["a"],VBtn:$["a"],VCard:N["a"],VCardText:A["c"],VCardTitle:A["d"],VCol:B["a"],VContainer:I["a"],VFileInput:ra["a"],VForm:Q["a"],VRow:U["a"],VSelect:sa["a"],VSpacer:O["a"],VTextField:Y["a"]});var oa=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",{attrs:{fluid:""}},[e("v-app-bar",{staticClass:"green",attrs:{app:"",dark:""}},[e("v-card-title",{staticClass:"headline",staticStyle:{"text-align":"center"}},[e("v-btn",{attrs:{color:"orange"},on:{click:a.goBack}},[a._v(" Back ")]),e("img",{staticClass:"logo-small",attrs:{src:"/Haen-cloudy/favicon.ico",alt:"Logo"}}),e("h4",[a._v("PROFILE")])],1),e("v-spacer")],1),e("v-container",[e("v-row",{attrs:{align:"center"}},[e("v-col",{attrs:{cols:"12"}},[e("v-card-text",[e("v-row",{attrs:{justify:"center"}},[e("v-col",{attrs:{cols:"auto"}},[e("v-img",{staticClass:"profile-picture",attrs:{src:a.karyawanData.foto,alt:"Profile Picture"}})],1)],1)],1),e("v-card",{staticClass:"data-card"},[e("v-card-title",{staticClass:"headline"},[a._v("Profil User")]),e("v-card-text",[e("table",[e("tbody",[e("tr",[e("td",[a._v("Nama:")]),e("td",[a._v(a._s(a.karyawanData.displayName))])]),e("tr",[e("td",[a._v("Email:")]),e("td",[a._v(a._s(a.karyawanData.email))])]),e("tr",[e("td",[a._v("Jenis Kelamin:")]),e("td",[a._v(a._s(a.karyawanData.jenisKelamin))])]),e("tr",[e("td",[a._v("Tanggal Lahir:")]),e("td",[a._v(a._s(a.karyawanData.tanggalLahir))])]),e("tr",[e("td",[a._v("No. Telp:")]),e("td",[a._v(a._s(a.karyawanData.noTelp))])]),e("tr",[e("td",[a._v("Jabatan:")]),e("td",[a._v(a._s(a.karyawanData.jabatan))])]),e("tr",[e("td",[a._v("Alamat:")]),e("td",[a._v(a._s(a.karyawanData.alamat))])])])])])],1)],1)],1)],1)],1)},la=[],ca={name:"KaryawanView",data(){return{karyawanData:null}},created(){const a=V["a"].auth().currentUser;a?this.getKaryawanData(a.email):(console.error("User not logged in."),this.$router.push("/home"))},methods:{async getKaryawanData(a){try{const t=await At.collection("registrations").where("email","==",a).get();if(t.empty)S.a.fire({icon:"error",title:"Error",text:"Data pendaftaran user tidak ditemukan"});else{const a=t.docs[0].data();this.karyawanData={displayName:a.displayName,email:a.email,jenisKelamin:a.jenisKelamin,tanggalLahir:a.tanggalLahir,noTelp:a.noTelp,jabatan:a.jabatan,alamat:a.alamat,foto:a.foto}}}catch(t){console.error("Error getting user data:",t),S.a.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data user"})}},goBack(){this.$router.push("/home")}}},ua=ca,da=(e("1af0"),Object(i["a"])(ua,oa,la,!1,null,"17f3ff9b",null)),ma=da.exports;y()(da,{VAppBar:E["a"],VBtn:$["a"],VCard:N["a"],VCardText:A["c"],VCardTitle:A["d"],VCol:B["a"],VContainer:I["a"],VImg:H["a"],VRow:U["a"],VSpacer:O["a"]});var pa=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("v-app-bar",{staticClass:"green",attrs:{app:"",dark:""}},[e("v-btn",{attrs:{color:"orange"},on:{click:a.goBack}},[a._v(" Back ")]),e("v-card-title",{staticClass:"headline"},[e("img",{staticClass:"logo-small",attrs:{src:"/Haen-cloudy/favicon.ico",alt:"Logo"}}),a._v(" LTQ-HN Absen Pagi ")])],1),e("v-container",{attrs:{fluid:""}},[e("v-card",{staticClass:"check-in-card"},[e("v-card-text",[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{cols:"6"}},[e("v-card",{staticClass:"menu-card"},[e("v-row",{attrs:{align:"center"}},[e("v-col",{attrs:{cols:"12"}},[e("h3",{staticClass:"menu-title"},[a._v("Date Time")]),e("div",{staticClass:"check-in-header"},[e("h1",[a._v(a._s(a.currentTime))]),e("h3",[a._v(a._s(a.formattedDate))])]),e("div",{staticClass:"check-in-user"},[e("h3",[a._v(a._s(a.userData&&a.userData.displayName))])])])],1)],1),e("v-card",{staticClass:"menu-card"},[e("v-row",{attrs:{align:"center"}},[e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"check-in-location"},[e("h4",[a._v(a._s(a.currentLocation))]),e("div",{ref:"mapElement",staticClass:"map-element"})])])],1)],1),e("v-card",{staticClass:"menu-card"},[e("v-row",{attrs:{align:"center"}},[e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"check-in-actions"},[e("v-btn",{attrs:{color:"success"},on:{click:a.submitCheckIn}},[a._v("ABSEN PAGI")])],1)])],1)],1)],1)],1)],1)],1)],1)],1)},ha=[],va=e("e11e"),fa=e.n(va);e("6cc5");delete fa.a.Icon.Default.prototype._getIconUrl,fa.a.Icon.Default.mergeOptions({iconRetinaUrl:e("584d"),iconUrl:e("6397"),shadowUrl:e("e2b9")});var ga={name:"CheckIn",data(){return{userData:null,formattedDate:"",currentTime:"",currentLocation:"",photoDataUrl:null,capturedFileName:""}},async created(){const a=V["a"].auth().currentUser;a?(await this.setUserData(),this.getCurrentDateTime(),this.getCurrentLocation()):(console.error("User not logged in."),this.$router.push("/home"))},methods:{goBack(){this.$router.push("/home")},async setUserData(){const a=V["a"].auth().currentUser;if(a){const t=await At.collection("registrations").where("email","==",a.email).get();if(t.empty)console.error("User data not found.");else{const a=t.docs[0].data();this.userData=a}}else console.error("User not logged in."),this.$router.push("/login")},getCurrentDateTime(){const a=new Date;this.formattedDate=a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),this.currentTime=a.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},getCurrentLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{const t=a.coords.latitude,e=a.coords.longitude;this.currentLocation=`Latitude: ${t}, Longitude: ${e}`,this.showMap(t,e)},a=>{console.error("Error getting current location:",a)}):console.error("Geolocation is not supported by this browser.")},submitCheckIn(){const a=V["a"].auth().currentUser;if(a&&this.userData&&this.userData.displayName){const a={displayName:this.userData.displayName,fileName:this.capturedFileName,location:this.currentLocation,timestamp:V["a"].firestore.Timestamp.now()};At.collection("check-ins").add(a).then(()=>{this.photoDataUrl&&this.uploadPhoto(this.photoDataUrl,this.capturedFileName),S.a.fire({icon:"success",title:"Success",text:"Absensi Pagi Berhasil"}).then(()=>{this.goBack()})}).catch(a=>{console.error("Error submitting check-in:",a),S.a.fire({icon:"error",title:"Error",text:"Gagal Melakukan Absensi"})})}else console.error("User data is missing or incomplete."),S.a.fire({icon:"error",title:"Error",text:"Failed to submit absen: User data is missing or incomplete"})},showMap(a,t){const e=this.$refs.mapElement,r=fa.a.map(e).setView([a,t],13);fa.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(r),fa.a.marker([a,t]).addTo(r).bindPopup("Lokasi Check In").openPopup()}}},ba=ga,ka=(e("0c64"),Object(i["a"])(ba,pa,ha,!1,null,"5c4bb435",null)),ya=ka.exports;y()(ka,{VAppBar:E["a"],VBtn:$["a"],VCard:N["a"],VCardText:A["c"],VCardTitle:A["d"],VCol:B["a"],VContainer:I["a"],VRow:U["a"]});var wa=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("v-app-bar",{staticClass:"green",attrs:{app:"",dark:""}},[e("v-btn",{attrs:{color:"orange"},on:{click:a.goBack}},[a._v(" Back ")]),e("v-card-title",{staticClass:"headline"},[e("img",{staticClass:"logo-small",attrs:{src:"/Haen-cloudy/favicon.ico",alt:"Logo"}}),a._v(" LTQ-HN Absen Sore ")])],1),e("v-container",{attrs:{fluid:""}},[e("v-card",{staticClass:"check-out-card"},[e("v-card-text",[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{cols:"6"}},[e("v-card",{staticClass:"menu-card"},[e("v-row",{attrs:{align:"center"}},[e("v-col",{attrs:{cols:"12"}},[e("h3",{staticClass:"menu-title"},[a._v("Date Time")]),e("div",{staticClass:"check-out-header"},[e("h1",[a._v(a._s(a.currentTime))]),e("h3",[a._v(a._s(a.formattedDate))])]),e("div",{staticClass:"check-out-user"},[e("h3",[a._v(a._s(a.userData&&a.userData.displayName))])])])],1)],1),e("v-card",{staticClass:"menu-card"},[e("v-row",{attrs:{align:"center"}},[e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"check-out-location"},[e("h4",[a._v(a._s(a.currentLocation))]),e("div",{ref:"mapElement",staticClass:"map-element"})])])],1)],1),e("v-card",{staticClass:"menu-card"},[e("v-row",{attrs:{align:"center"}},[e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"check-out-actions"},[e("v-btn",{attrs:{color:"success"},on:{click:a.submitCheckOut}},[a._v("ABSEN SORE")])],1)])],1)],1)],1)],1)],1)],1)],1)],1)},xa=[];delete fa.a.Icon.Default.prototype._getIconUrl,fa.a.Icon.Default.mergeOptions({iconRetinaUrl:e("584d"),iconUrl:e("6397"),shadowUrl:e("e2b9")});var Ca={name:"CheckOut",data(){return{userData:null,formattedDate:"",currentTime:"",currentLocation:"",photoDataUrl:null,capturedFileName:""}},async created(){const a=V["a"].auth().currentUser;a?(await this.setUserData(),this.getCurrentDateTime(),this.getCurrentLocation()):(console.error("User not logged in."),this.$router.push("/home"))},methods:{goBack(){this.$router.push("/home")},async setUserData(){const a=V["a"].auth().currentUser;if(a){const t=await At.collection("registrations").where("email","==",a.email).get();if(t.empty)console.error("User data not found.");else{const a=t.docs[0].data();this.userData=a}}else console.error("User not logged in."),this.$router.push("/login")},getCurrentDateTime(){const a=new Date;this.formattedDate=a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),this.currentTime=a.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},getCurrentLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{const t=a.coords.latitude,e=a.coords.longitude;this.currentLocation=`Latitude: ${t}, Longitude: ${e}`,this.showMap(t,e)},a=>{console.error("Error getting current location:",a)}):console.error("Geolocation is not supported by this browser.")},submitCheckOut(){const a=V["a"].auth().currentUser;if(a&&this.userData&&this.userData.displayName){const a={displayName:this.userData.displayName,fileName:this.capturedFileName,location:this.currentLocation,timestamp:V["a"].firestore.Timestamp.now()};At.collection("check-outs").add(a).then(()=>{this.photoDataUrl&&this.uploadPhoto(this.photoDataUrl,this.capturedFileName),S.a.fire({icon:"success",title:"Success",text:"Absensi Sore Berhasil"}).then(()=>{this.goBack()})}).catch(a=>{console.error("Error submitting check-out:",a),S.a.fire({icon:"error",title:"Error",text:"Gagal Melakukan Absen Sore"})})}else console.error("User data is missing or incomplete."),S.a.fire({icon:"error",title:"Error",text:"Failed to submit check-out: User data is missing or incomplete"})},showMap(a,t){const e=this.$refs.mapElement,r=fa.a.map(e).setView([a,t],13);fa.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(r),fa.a.marker([a,t]).addTo(r).bindPopup("Lokasi Check Out").openPopup()}}},_a=Ca,Ta=(e("800e"),Object(i["a"])(_a,wa,xa,!1,null,"b877e024",null)),Da=Ta.exports;y()(Ta,{VAppBar:E["a"],VBtn:$["a"],VCard:N["a"],VCardText:A["c"],VCardTitle:A["d"],VCol:B["a"],VContainer:I["a"],VRow:U["a"]});var La=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",{attrs:{fluid:""}},[e("v-app-bar",{staticClass:"green",attrs:{app:"",dark:""}},[e("v-card-title",{staticClass:"headline"},[e("img",{staticClass:"logo-small",attrs:{src:"/Haen-cloudy/favicon.ico",alt:"Logo"}}),a._v(" LTQ-HN ")]),e("v-spacer"),e("v-btn",{attrs:{color:"orange"},on:{click:a.goBack}},[a._v(" Back ")])],1),e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"4"}},[e("v-card",{staticClass:"menu-card"},[e("v-img",{attrs:{src:"/Haen-cloudy/images/Register.jpg",height:"200px"}}),e("v-card-text",[e("v-btn",{attrs:{color:"green",dark:""},on:{click:a.goToRegistrasi}},[a._v("Registrasi")])],1)],1)],1),e("v-col",{attrs:{cols:"12",sm:"4"}},[e("v-card",{staticClass:"menu-card"},[e("v-img",{attrs:{src:"/Haen-cloudy/images/profile.jpg",height:"200px"}}),e("v-card-text",[e("v-btn",{attrs:{color:"green",dark:""},on:{click:a.goToListKaryawan}},[a._v("Daftar Pembimbing")])],1)],1)],1),e("v-col",{attrs:{cols:"12",sm:"4"}},[e("v-card",{staticClass:"menu-card"},[e("v-img",{attrs:{src:"/Haen-cloudy/images/ListAbsen.jpg",height:"200px"}}),e("v-card-text",[e("v-btn",{attrs:{color:"green",dark:""},on:{click:a.goToListAbsen}},[a._v("List Absen")])],1)],1)],1)],1)],1)],1)},Sa=[],Va={name:"DashboardView",computed:{...Object(f["b"])(["getUserRole"])},metaInfo(){return{meta:[{name:"requiresAuth",content:!0},{name:"requiredRole",content:"admin"}]}},methods:{checkUserRole(){const a=this.getUserRole();"admin"!==a&&(this.$router.push("/home"),S.a.fire({icon:"warning",title:"Akses Ditolak",text:"Anda tidak memiliki akses ke halaman ini.",confirmButtonText:"OK"}))},goBack(){this.$router.push("/home")},goToListKaryawan(){this.$router.push("/list-karyawan")},goToListAbsen(){this.$router.push("/list-absen")},goToListCuti(){this.$router.push("/list-cuti")},goToRegistrasi(){this.$router.push("/register")}}},ja=Va,Ka=(e("64a4"),Object(i["a"])(ja,La,Sa,!1,null,"0f7e76d7",null)),Ea=Ka.exports;y()(Ka,{VAppBar:E["a"],VBtn:$["a"],VCard:N["a"],VCardText:A["c"],VCardTitle:A["d"],VCol:B["a"],VContainer:I["a"],VImg:H["a"],VRow:U["a"],VSpacer:O["a"]});var $a=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",{staticClass:"mb-5",attrs:{fluid:""}},[e("v-app-bar",{staticClass:"green",attrs:{app:"",dark:""}},[e("v-card-title",{staticClass:"headline"},[e("v-btn",{attrs:{color:"orange"},on:{click:a.goBack}},[a._v(" Back ")]),e("img",{staticClass:"logo-small",attrs:{src:"/Haen-cloudy/favicon.ico",alt:"Logo"}}),a._v(" Haen Dashboard ")],1),e("v-spacer")],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-card",[e("v-card-title",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[e("v-text-field",{attrs:{label:"Search","append-icon":"mdi-magnify","single-line":"","hide-details":""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1)],1)],1),e("v-card-text",[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.filteredKaryawanList,"item-key":"id","hide-default-footer":""},scopedSlots:a._u([{key:"top",fn:function(){return[e("v-toolbar",{attrs:{flat:""}},[e("v-toolbar-title",[a._v("Pembimbing")]),e("v-spacer"),e("v-btn",{attrs:{color:"primary"},on:{click:a.exportToExcel}},[a._v("Export Excel")])],1)]},proxy:!0},{key:"item.actions",fn:function(t){var r=t.item;return[e("v-icon",{staticClass:"mr-2",on:{click:function(t){return a.editKaryawan(r)}}},[a._v("mdi-pencil")]),e("v-icon",{on:{click:function(t){return a.deleteKaryawan(r)}}},[a._v("mdi-delete")])]}}])})],1)],1)],1)],1),e("v-dialog",{attrs:{"max-width":"600px"},model:{value:a.dialogEdit,callback:function(t){a.dialogEdit=t},expression:"dialogEdit"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"headline"},[a._v(a._s(a.editedKaryawan.displayName))])]),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-text-field",{attrs:{label:"Display Name"},model:{value:a.editedKaryawan.displayName,callback:function(t){a.$set(a.editedKaryawan,"displayName",t)},expression:"editedKaryawan.displayName"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-text-field",{attrs:{label:"Email",disabled:""},model:{value:a.editedKaryawan.email,callback:function(t){a.$set(a.editedKaryawan,"email",t)},expression:"editedKaryawan.email"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-text-field",{attrs:{label:"No. Telp"},model:{value:a.editedKaryawan.noTelp,callback:function(t){a.$set(a.editedKaryawan,"noTelp",t)},expression:"editedKaryawan.noTelp"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-text-field",{attrs:{label:"Tanggal Lahir"},model:{value:a.editedKaryawan.tanggalLahir,callback:function(t){a.$set(a.editedKaryawan,"tanggalLahir",t)},expression:"editedKaryawan.tanggalLahir"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-select",{attrs:{label:"Jenis Kelamin",items:a.jenisKelaminOptions},model:{value:a.editedKaryawan.jenisKelamin,callback:function(t){a.$set(a.editedKaryawan,"jenisKelamin",t)},expression:"editedKaryawan.jenisKelamin"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-text-field",{attrs:{label:"Alamat"},model:{value:a.editedKaryawan.alamat,callback:function(t){a.$set(a.editedKaryawan,"alamat",t)},expression:"editedKaryawan.alamat"}})],1)],1)],1)],1),e("v-card-actions",[e("v-btn",{attrs:{color:"primary",text:""},on:{click:a.cancelEdit}},[a._v("Batal")]),e("v-btn",{attrs:{color:"primary"},on:{click:a.saveEdit}},[a._v("Simpan")])],1)],1)],1)],1)},Na=[],Aa=(e("e71f"),e("21a6")),Ba=e("1146"),Ia=e.n(Ba),Ha={name:"ListKaryawanView",data(){return{search:"",karyawanList:[],filteredKaryawanList:[],headers:[{text:"Display Name",value:"displayName"},{text:"Email",value:"email"},{text:"No. Telp",value:"noTelp"},{text:"Tanggal Lahir",value:"tanggalLahir"},{text:"Jenis Kelamin",value:"jenisKelamin"},{text:"Alamat",value:"alamat"},{text:"Actions",value:"actions",sortable:!1}],dialogEdit:!1,editedKaryawan:{id:"",displayName:"",email:"",noTelp:"",tanggalLahir:"",jenisKelamin:"",alamat:""},jenisKelaminOptions:["Laki-laki","Perempuan"]}},created(){this.getKaryawanList()},methods:{getKaryawanList(){const a=V["a"].firestore();a.collection("registrations").get().then(a=>{const t=[];a.forEach(a=>{const e=a.data();e.id=a.id,t.push(e)}),this.karyawanList=t,this.filteredKaryawanList=t}).catch(a=>{S.a.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data karyawan"}),console.error("Error getting karyawan list:",a)})},editKaryawan(a){this.editedKaryawan={...a},this.dialogEdit=!0},cancelEdit(){this.dialogEdit=!1,this.editedKaryawan={id:"",displayName:"",email:"",noTelp:"",tanggalLahir:"",jenisKelamin:"",alamat:""}},saveEdit(){const a=V["a"].firestore();a.collection("registrations").doc(this.editedKaryawan.id).update(this.editedKaryawan).then(()=>{S.a.fire({icon:"success",title:"Sukses",text:"Karyawan berhasil diperbarui"}),this.dialogEdit=!1,this.getKaryawanList()}).catch(a=>{S.a.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat memperbarui karyawan"}),console.error("Error updating karyawan:",a)})},deleteKaryawan(a){S.a.fire({title:"Konfirmasi",text:"Anda yakin ingin menghapus karyawan ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus",cancelButtonText:"Batal"}).then(t=>{if(t.isConfirmed){const t=V["a"].firestore();t.collection("registrations").doc(a.id).delete().then(()=>{S.a.fire({icon:"success",title:"Sukses",text:"Karyawan berhasil dihapus"}),this.getKaryawanList()}).catch(a=>{S.a.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat menghapus karyawan"}),console.error("Error deleting karyawan:",a)})}})},exportToExcel(){const a=this.filteredKaryawanList.map(a=>({"Display Name":a.displayName,Email:a.email,"No. Telp":a.noTelp,"Tanggal Lahir":a.tanggalLahir,"Jenis Kelamin":a.jenisKelamin,Alamat:a.alamat})),t=Ba["utils"].json_to_sheet(a),e=Ba["utils"].book_new();Ba["utils"].book_append_sheet(e,t,"Karyawan");const r=Ba["write"](e,{bookType:"xlsx",type:"array",compression:!0}),s=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n="karyawan_data.xlsx";Object(Aa["saveAs"])(s,n)},goBack(){this.$router.go(-1)}},computed:{filteredKaryawanData(){if(this.search){const a=this.search.toLowerCase();return this.karyawanList.filter(t=>t.displayName.toLowerCase().includes(a)||t.email.toLowerCase().includes(a)||t.noTelp.toLowerCase().includes(a)||t.tanggalLahir.toLowerCase().includes(a)||t.jenisKelamin.toLowerCase().includes(a)||t.alamat.toLowerCase().includes(a))}return this.karyawanList}}},Ua=Ha,Oa=(e("c576"),e("8fea")),Ra=e("169a"),Fa=e("132d"),Pa=e("71d9"),Ma=Object(i["a"])(Ua,$a,Na,!1,null,"214f6cd8",null),Ja=Ma.exports;y()(Ma,{VAppBar:E["a"],VBtn:$["a"],VCard:N["a"],VCardActions:A["a"],VCardText:A["c"],VCardTitle:A["d"],VCol:B["a"],VContainer:I["a"],VDataTable:Oa["a"],VDialog:Ra["a"],VIcon:Fa["a"],VRow:U["a"],VSelect:sa["a"],VSpacer:O["a"],VTextField:Y["a"],VToolbar:Pa["a"],VToolbarTitle:R["a"]});var qa=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",{staticClass:"mb-5",attrs:{fluid:""}},[e("v-app-bar",{staticClass:"green",attrs:{app:"",dark:""}},[e("v-card-title",{staticClass:"headline"},[e("v-btn",{attrs:{color:"orange"},on:{click:a.goBack}},[a._v(" Back ")]),e("img",{staticClass:"logo-small",attrs:{src:"/Haen-cloudy/favicon.ico",alt:"Logo"}}),a._v(" Haen Dashboard ")],1),e("v-spacer")],1),e("v-card",{staticClass:"mb-3"},[e("v-card-title",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[e("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:a._u([{key:"activator",fn:function(t){var r=t.on,s=t.attrs;return[e("v-text-field",a._g(a._b({attrs:{label:"Start Date",readonly:""},model:{value:a.startDate,callback:function(t){a.startDate=t},expression:"startDate"}},"v-text-field",s,!1),r))]}}]),model:{value:a.menu,callback:function(t){a.menu=t},expression:"menu"}},[e("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:a.startDate,callback:function(t){a.startDate=t},expression:"startDate"}},[e("v-spacer"),e("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){a.menu=!1}}},[a._v("Cancel")]),e("v-btn",{attrs:{text:"",color:"primary"},on:{click:a.applyFilter}},[a._v("OK")])],1)],1)],1),e("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[e("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:a._u([{key:"activator",fn:function(t){var r=t.on,s=t.attrs;return[e("v-text-field",a._g(a._b({attrs:{label:"End Date",readonly:""},model:{value:a.endDate,callback:function(t){a.endDate=t},expression:"endDate"}},"v-text-field",s,!1),r))]}}]),model:{value:a.menu2,callback:function(t){a.menu2=t},expression:"menu2"}},[e("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:a.endDate,callback:function(t){a.endDate=t},expression:"endDate"}},[e("v-spacer"),e("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){a.menu2=!1}}},[a._v("Cancel")]),e("v-btn",{attrs:{text:"",color:"primary"},on:{click:a.applyFilter}},[a._v("OK")])],1)],1)],1),e("v-col",{attrs:{cols:"6",sm:"6",md:"4"}},[e("v-btn",{staticClass:"mb-2 pl-4",attrs:{color:"primary"},on:{click:a.applyFilter}},[a._v("Apply Filter")])],1),e("v-col",{attrs:{cols:"6"}},[e("v-btn",{staticClass:"mb-2",attrs:{color:"",dark:""},on:{click:a.clearFilter}},[a._v("Clear Filter")])],1)],1),e("v-btn",{staticClass:"mb-2",attrs:{color:"green",dark:""},on:{click:a.exportToExcel}},[a._v("Export Excel")])],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-card",[e("v-card-text",[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headersMasuk,items:a.filteredAbsenMasuk,"item-key":"id","hide-default-footer":""},scopedSlots:a._u([{key:"top",fn:function(){return[e("v-toolbar",{attrs:{flat:""}},[e("v-toolbar-title",[a._v("Pagi")]),e("v-spacer")],1)]},proxy:!0}])})],1)],1)],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-card",[e("v-card-text",[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headersKeluar,items:a.filteredAbsenKeluar,"item-key":"id","hide-default-footer":""},scopedSlots:a._u([{key:"top",fn:function(){return[e("v-toolbar",{attrs:{flat:""}},[e("v-toolbar-title",[a._v("Sore")]),e("v-spacer")],1)]},proxy:!0}])})],1)],1)],1)],1)],1)},za=[],Ga={name:"ListAbsenView",data(){return{startDate:null,endDate:null,menu:!1,menu2:!1,startDate2:null,endDate2:null,menu3:!1,menu4:!1,absenListMasuk:[],absenListKeluar:[],filteredAbsenMasuk:[],filteredAbsenKeluar:[],headersMasuk:[{text:"No",value:"no"},{text:"Nama",value:"displayName"},{text:"Pagi",value:"masuk"}],headersKeluar:[{text:"No",value:"no"},{text:"Nama ",value:"displayName"},{text:"Sore",value:"keluar"}]}},created(){this.getAbsenList()},methods:{getAbsenList(){const a=V["a"].firestore(),t=a.collection("check-ins").orderBy("timestamp","desc"),e=a.collection("check-outs").orderBy("timestamp","desc");Promise.all([t.get(),e.get()]).then(a=>{const t=a[0].docs.map((a,t)=>{const e=a.data();return{...e,no:t+1,masuk:e.timestamp.toDate().toLocaleString()}}),e=a[1].docs.map((a,t)=>{const e=a.data();return{...e,no:t+1,keluar:e.timestamp.toDate().toLocaleString()}});this.absenListMasuk=t,this.absenListKeluar=e,this.filteredAbsenMasuk=t,this.filteredAbsenKeluar=e}).catch(a=>{S.a.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data absensi"}),console.error("Error getting absen list:",a)})},exportToExcel(){const a=this.filteredAbsenMasuk.map(a=>({No:a.no,"Nama (Masuk)":a.displayName,Masuk:a.masuk?new Date(a.masuk).toLocaleString():""," ":" ","Nama (Keluar)":"",Keluar:""}));this.filteredAbsenKeluar.forEach((t,e)=>{const r=a[e];r&&(t.keluar?(r.Keluar=new Date(t.keluar).toLocaleString(),r["Nama (Keluar)"]=t.displayName):r.Keluar="")}),console.log(a);const t=Ba["utils"].json_to_sheet(a),e=Ba["utils"].book_new();Ba["utils"].book_append_sheet(e,t,"Absensi");const r=Ba["write"](e,{bookType:"xlsx",type:"array"}),s="absen_data.xlsx",n=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object(Aa["saveAs"])(n,s)},applyFilter(){if(this.startDate&&this.endDate){const a=this.absenListMasuk.filter(a=>{const t=new Date(this.startDate).setUTCHours(0,0,0,0),e=new Date(this.endDate).setUTCHours(23,59,59,999),r=new Date(a.masuk);return r>=t&&r<=e}),t=this.absenListKeluar.filter(a=>{const t=new Date(this.startDate).setUTCHours(0,0,0,0),e=new Date(this.endDate).setUTCHours(23,59,59,999),r=new Date(a.keluar);return r>=t&&r<=e});this.filteredAbsenMasuk=a,this.filteredAbsenKeluar=t}else this.filteredAbsenMasuk=this.absenListMasuk,this.filteredAbsenKeluar=this.absenListKeluar},clearFilter(){this.startDate=null,this.endDate=null,this.startDate2=null,this.endDate2=null,this.filteredAbsenMasuk=this.absenListMasuk,this.filteredAbsenKeluar=this.absenListKeluar},goBack(){this.$router.push("/dashboard")}}},Qa=Ga,Ya=(e("bf9c"),e("2e4b")),Wa=e("e449"),Za=Object(i["a"])(Qa,qa,za,!1,null,"5ff12d2d",null),Xa=Za.exports;y()(Za,{VAppBar:E["a"],VBtn:$["a"],VCard:N["a"],VCardText:A["c"],VCardTitle:A["d"],VCol:B["a"],VContainer:I["a"],VDataTable:Oa["a"],VDatePicker:Ya["a"],VMenu:Wa["a"],VRow:U["a"],VSpacer:O["a"],VTextField:Y["a"],VToolbar:Pa["a"],VToolbarTitle:R["a"]});var at=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",[e("v-card",{staticClass:"pa-5"},[e("v-btn",{staticClass:"mr-2",attrs:{color:"orange",dark:""},on:{click:a.goBack}},[a._v("Back")]),e("v-btn",{attrs:{color:"primary"},on:{click:a.saveSantri}},[a._v("Save")]),e("v-row",{attrs:{justify:"end"}},[e("v-col",{attrs:{cols:"auto"}},[e("v-btn",{staticClass:"mr-2",attrs:{color:"secondary"},on:{click:function(t){a.showForm="registrasi"}}},[a._v("Form Registrasi")])],1),e("v-col",{attrs:{cols:"auto"}},[e("v-btn",{attrs:{color:"secondary"},on:{click:function(t){a.showForm="hafalan"}}},[a._v("Form Laporan Hafalan")])],1)],1),"registrasi"===a.showForm?e("div",[e("v-form",{ref:"form",model:{value:a.valid,callback:function(t){a.valid=t},expression:"valid"}},[e("v-text-field",{attrs:{label:"Nama Santri",rules:a.nameRules,required:""},model:{value:a.santri.nama,callback:function(t){a.$set(a.santri,"nama",t)},expression:"santri.nama"}}),e("v-text-field",{attrs:{label:"Kelas",required:""},model:{value:a.santri.kelas,callback:function(t){a.$set(a.santri,"kelas",t)},expression:"santri.kelas"}}),e("v-select",{attrs:{label:"Jenis Kelamin",items:["Laki-Laki","Perempuan"]},model:{value:a.santri.jeniskelamin,callback:function(t){a.$set(a.santri,"jeniskelamin",t)},expression:"santri.jeniskelamin"}}),e("v-text-field",{attrs:{label:"Umur",type:"number",rules:a.ageRules,required:""},model:{value:a.santri.umur,callback:function(t){a.$set(a.santri,"umur",t)},expression:"santri.umur"}}),e("v-text-field",{attrs:{label:"Alamat",required:""},model:{value:a.santri.alamat,callback:function(t){a.$set(a.santri,"alamat",t)},expression:"santri.alamat"}}),e("v-text-field",{attrs:{label:"No. Telp",required:""},model:{value:a.santri.noTelp,callback:function(t){a.$set(a.santri,"noTelp",t)},expression:"santri.noTelp"}}),e("v-file-input",{attrs:{label:"Foto Santri",accept:"image/*"},on:{change:a.uploadFoto}})],1)],1):a._e(),"hafalan"===a.showForm?e("div",[a._l(a.laporanHafalanItems,(function(t,r){return e("div",{key:r},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"2"}},[e("v-text-field",{attrs:{label:"Tanggal",type:"date",value:a.currentDate,required:""},model:{value:t.tanggal,callback:function(e){a.$set(t,"tanggal",e)},expression:"item.tanggal"}})],1),e("v-col",{attrs:{cols:"12",sm:"2"}},[e("v-text-field",{attrs:{label:"Surat Hafalan",required:""},model:{value:t.surat,callback:function(e){a.$set(t,"surat",e)},expression:"item.surat"}})],1),e("v-col",{attrs:{cols:"12",sm:"2"}},[e("v-text-field",{attrs:{label:"Ayat / Halaman",required:""},model:{value:t.ayatHalaman,callback:function(e){a.$set(t,"ayatHalaman",e)},expression:"item.ayatHalaman"}})],1),e("v-col",{attrs:{cols:"12",sm:"2"}},[e("v-select",{attrs:{label:"Penilaian",items:a.penilaianItems,required:""},model:{value:t.penilaian,callback:function(e){a.$set(t,"penilaian",e)},expression:"item.penilaian"}})],1),e("v-col",{attrs:{cols:"12",sm:"3"}},[e("v-text-field",{attrs:{label:"Keterangan"},model:{value:t.keterangan,callback:function(e){a.$set(t,"keterangan",e)},expression:"item.keterangan"}})],1),e("v-col",{attrs:{cols:"12",sm:"1"}},[e("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(t){return a.deleteLaporanHafalanItem(r)}}},[e("v-icon",[a._v("mdi-delete")])],1)],1)],1)],1)})),e("v-btn",{on:{click:a.addLaporanHafalanItem}},[a._v("Tambah Kolom")])],2):a._e()],1)],1)},tt=[],et=(e("588e"),{data(){return{valid:!0,showForm:"registrasi",santri:{nama:"",kelas:"",jeniskelamin:"",umur:"",alamat:"",noTelp:"",foto:""},laporanHafalanItems:[{tanggal:(new Date).toISOString().substr(0,10),surat:"",ayatHalaman:"",penilaian:"",keterangan:""}],penilaianItems:["Maqbul","Jayyid","Jayyid Jiddan","Mumtaz"],nameRules:[a=>!!a||"Nama diperlukan"],ageRules:[a=>!!a||"Umur diperlukan"],currentDate:(new Date).toISOString().substr(0,10)}},methods:{goBack(){S.a.fire({title:"Are you sure?",text:"Do you want to leave this page?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, go back!"}).then(a=>{a.isConfirmed&&this.$router.push("/hafalan")})},deleteLaporanHafalanItem(a){this.laporanHafalanItems.splice(a,1)},async saveSantri(){if(this.$refs.form&&this.$refs.form.validate())try{this.santri.nomorSantri=this.generateUniqueId();const a=await V["a"].firestore().collection("santris").add(this.santri),t=a.id;for(const e of this.laporanHafalanItems)await V["a"].firestore().collection("hafalans").add({...e,nomorSantri:this.santri.nomorSantri,santriId:t});S.a.fire("Saved!","All data has been saved.","success"),this.resetForm()}catch(a){console.error("Error saving data:",a),S.a.fire("Error!","Failed to save data.","error")}else S.a.fire("Error!","Please fill in the registration form correctly.","error")},generateUniqueId(){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";let t="SAN";const e=a.length;for(let r=0;r<5;r++)t+=a.charAt(Math.floor(Math.random()*e));return t},async uploadFoto(a){if(a)try{const t=this.santri.nama.replace(/\s+/g,"_")+"_"+a.name,e=V["a"].storage().ref().child(t),r=await e.put(a);this.santri.foto=await r.ref.getDownloadURL()}catch(t){console.error("Error uploading photo:",t),S.a.fire("Error!","Failed to upload photo.","error")}},resetForm(){this.$refs.form.reset(),this.santri={nama:"",kelas:"",jeniskelamin:"",umur:"",alamat:"",noTelp:"",foto:""},this.laporanHafalanItems=[{tanggal:(new Date).toISOString().substr(0,10),surat:"",ayatHalaman:"",penilaian:"",keterangan:""}]},addLaporanHafalanItem(){this.laporanHafalanItems.push({tanggal:(new Date).toISOString().substr(0,10),surat:"",ayatHalaman:"",penilaian:"",keterangan:""})}}}),rt=et,st=(e("6757"),Object(i["a"])(rt,at,tt,!1,null,null,null)),nt=st.exports;y()(st,{VBtn:$["a"],VCard:N["a"],VCol:B["a"],VContainer:I["a"],VFileInput:ra["a"],VForm:Q["a"],VIcon:Fa["a"],VRow:U["a"],VSelect:sa["a"],VTextField:Y["a"]});var it=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",{staticClass:"mb-5",attrs:{fluid:""}},[e("v-card",{staticClass:"mb-3"},[e("v-toolbar",{attrs:{flat:"",color:"green",dark:""}},[e("v-btn",{staticClass:"mr-2",attrs:{color:"orange"},on:{click:a.goBack}},[a._v("Back")]),e("v-btn",{attrs:{color:"primary"},on:{click:a.goToListSantri}},[a._v("Registrasi Santri")]),e("v-spacer"),e("v-btn",{attrs:{color:"green"},on:{click:a.exportToExcel}},[a._v("Ekspor ke Excel")])],1),e("v-card-title",[e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Cari Santri","single-line":"","hide-details":""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1)],1),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.filteredSantris,search:a.search},scopedSlots:a._u([{key:"item.update",fn:function(t){return[e("td",[e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return a.navigateToprofilesantri(t.item)}}},[a._v("Update")])],1),e("td",[e("v-btn",{attrs:{color:"secondary"},on:{click:function(e){return a.deleteSantri(t.item)}}},[a._v("Delete")])],1)]}},{key:"items",fn:function(t){return[e("td",[a._v(a._s(t.item.nama))]),e("td",[a._v(a._s(t.item.kelas))]),e("td",[a._v(a._s(t.item.umur))]),e("td",[a._v(a._s(t.item.jeniskelamin))]),e("td",[e("v-menu",{attrs:{"offset-y":""},scopedSlots:a._u([{key:"activator",fn:function(t){var r=t.on,s=t.attrs;return[e("v-btn",a._g(a._b({attrs:{icon:""}},"v-btn",s,!1),r),[e("v-icon",[a._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e("v-list",[e("v-list-item",{on:{click:function(e){return a.deleteSantri(t.item)}}},[e("v-list-item-title",[a._v("Delete")])],1)],1)],1)],1)]}}])})],1)},ot=[],lt={data(){return{search:"",santris:[],filteredSantris:[],headers:[{text:"Update",value:"update",sortable:!1},{text:"Nama",value:"nama"},{text:"Kelas",value:"kelas"},{text:"Umur",value:"umur"},{text:"Jenis Kelamin",value:"jeniskelamin"}]}},created(){this.getSantriList()},watch:{search(a){this.filteredSantris=this.santris.filter(t=>Object.values(t).some(t=>t.toString().toLowerCase().includes(a.toLowerCase())))}},methods:{getSantriList(){const a=V["a"].firestore();a.collection("santris").get().then(a=>{const t=[];a.forEach(a=>{const e=a.data();e.id=a.id,t.push(e)}),this.santris=t,this.filteredSantris=t}).catch(a=>{S.a.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data santri"}),console.error("Error getting santri list:",a)})},goBack(){S.a.fire({title:"Are you sure?",text:"Do you want to leave this page?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, go back!"}).then(a=>{a.isConfirmed&&this.$router.push("/home")})},navigateToprofilesantri(a){this.$router.push({name:"profilesantri",params:{santriId:a.id}})},deleteSantri(a){S.a.fire({title:"Konfirmasi",text:"Anda yakin ingin menghapus santri ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus",cancelButtonText:"Batal"}).then(t=>{if(t.isConfirmed){const t=V["a"].firestore(),e=t.collection("santris");e.doc(a.id).delete().then(()=>{S.a.fire({icon:"success",title:"Sukses",text:"Santri berhasil dihapus"}),this.getSantriList()}).catch(a=>{"permission-denied"===a.code?S.a.fire({icon:"error",title:"Error",text:"Anda tidak memiliki izin untuk menghapus santri"}):S.a.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat menghapus santri"}),console.error("Error deleting santri:",a)})}})},exportToExcel(){const a=this.filteredSantris.map(a=>({Nama:a.nama,Kelas:a.kelas,Umur:a.umur,"Jenis Kelamin":a.jenisKelamin})),t=Ba["utils"].json_to_sheet(a),e=Ba["utils"].book_new();Ba["utils"].book_append_sheet(e,t,"Santris");const r=Ba["write"](e,{bookType:"xlsx",type:"array",compression:!0}),s=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n="santris_data.xlsx";Object(Aa["saveAs"])(s,n)},goToListSantri(){this.$router.push("/list-santri")}}},ct=lt,ut=(e("7e83"),e("8860")),dt=e("da13"),mt=e("5d23"),pt=Object(i["a"])(ct,it,ot,!1,null,"6633d611",null),ht=pt.exports;y()(pt,{VBtn:$["a"],VCard:N["a"],VCardTitle:A["d"],VContainer:I["a"],VDataTable:Oa["a"],VIcon:Fa["a"],VList:ut["a"],VListItem:dt["a"],VListItemTitle:mt["b"],VMenu:Wa["a"],VSpacer:O["a"],VTextField:Y["a"],VToolbar:Pa["a"]});var vt=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",[e("v-card",{staticClass:"pa-5"},[e("v-btn",{staticClass:"mr-2",attrs:{color:"orange",dark:""},on:{click:a.goBack}},[a._v("Back")]),e("v-btn",{attrs:{color:"primary"},on:{click:a.saveChanges}},[a._v("Simpan")]),e("v-row",{attrs:{justify:"end"}},[e("v-col",{attrs:{cols:"auto"}},[e("v-btn",{staticClass:"mr-2",attrs:{color:"secondary"},on:{click:function(t){a.showForm="profil"}}},[a._v("Form Registrasi")])],1),e("v-col",{attrs:{cols:"auto"}},[e("v-btn",{attrs:{color:"secondary"},on:{click:function(t){a.showForm="hafalan"}}},[a._v("Form Laporan Hafalan")])],1),e("v-col",{attrs:{cols:"auto"}},[e("v-btn",{attrs:{color:"green",dark:""},on:{click:a.exportToPDF}},[a._v("Ekspor ke PDF")])],1)],1),"profil"===a.showForm?e("v-card",{staticClass:"pa-5"},[e("v-row",[e("v-col",{attrs:{cols:"2"}},[e("v-img",{attrs:{src:a.santri.foto,"aspect-ratio":"1"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-text-field",{attrs:{label:"Nama Santri"},model:{value:a.santri.nama,callback:function(t){a.$set(a.santri,"nama",t)},expression:"santri.nama"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-text-field",{attrs:{label:"Kelas"},model:{value:a.santri.kelas,callback:function(t){a.$set(a.santri,"kelas",t)},expression:"santri.kelas"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-select",{attrs:{label:"Jenis Kelamin",items:["Laki-Laki","Perempuan"]},model:{value:a.santri.jeniskelamin,callback:function(t){a.$set(a.santri,"jeniskelamin",t)},expression:"santri.jeniskelamin"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-text-field",{attrs:{label:"Umur",type:"number"},model:{value:a.santri.umur,callback:function(t){a.$set(a.santri,"umur",t)},expression:"santri.umur"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Alamat"},model:{value:a.santri.alamat,callback:function(t){a.$set(a.santri,"alamat",t)},expression:"santri.alamat"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"No. Telp"},model:{value:a.santri.noTelp,callback:function(t){a.$set(a.santri,"noTelp",t)},expression:"santri.noTelp"}})],1)],1)],1):a._e(),"hafalan"===a.showForm?e("v-card",{staticClass:"pa-5"},[a._l(a.laporanHafalanItems,(function(t,r){return e("div",{key:r},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"2"}},[e("v-text-field",{attrs:{label:"Tanggal",type:"date",value:a.currentDate,required:""},model:{value:t.tanggal,callback:function(e){a.$set(t,"tanggal",e)},expression:"item.tanggal"}})],1),e("v-col",{attrs:{cols:"12",sm:"2"}},[e("v-text-field",{attrs:{label:"Surat Hafalan",required:""},model:{value:t.surat,callback:function(e){a.$set(t,"surat",e)},expression:"item.surat"}})],1),e("v-col",{attrs:{cols:"12",sm:"2"}},[e("v-text-field",{attrs:{label:"Ayat / Halaman",required:""},model:{value:t.ayatHalaman,callback:function(e){a.$set(t,"ayatHalaman",e)},expression:"item.ayatHalaman"}})],1),e("v-col",{attrs:{cols:"12",sm:"2"}},[e("v-select",{attrs:{label:"Penilaian",items:a.penilaianItems,required:""},model:{value:t.penilaian,callback:function(e){a.$set(t,"penilaian",e)},expression:"item.penilaian"}})],1),e("v-col",{attrs:{cols:"12",sm:"3"}},[e("v-text-field",{attrs:{label:"Keterangan"},model:{value:t.keterangan,callback:function(e){a.$set(t,"keterangan",e)},expression:"item.keterangan"}})],1),e("v-col",{attrs:{cols:"12",sm:"1"}},[e("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(e){return a.deleteLaporanHafalanItem(r,t.id)}}},[e("v-icon",[a._v("mdi-delete")])],1)],1)],1)],1)})),e("v-btn",{on:{click:a.addLaporanHafalanItem}},[a._v("Tambah Kolom")])],2):a._e()],1)],1)},ft=[],gt=e("8baf"),bt=(e("0da4"),{data(){return{valid:!0,showForm:"profil",santri:{nama:"",kelas:"",jeniskelamin:"",umur:"",alamat:"",noTelp:"",foto:""},laporanHafalanItems:[],penilaianItems:["Maqbul","Jayyid","Jayyid Jiddan","Mumtaz"],nameRules:[a=>!!a||"Nama diperlukan"],ageRules:[a=>!!a||"Umur diperlukan"],currentDate:(new Date).toISOString().substr(0,10)}},created(){const a=this.$route.params.santriId,t=V["a"].firestore();t.collection("santris").doc(a).get().then(a=>{a.exists?this.santri=a.data():S.a.fire({icon:"error",title:"Error",text:"Data Santri tidak ditemukan"})}).catch(a=>{S.a.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data Santri"}),console.error("Error getting Santri data:",a)}),this.getHafalanData(a)},methods:{showHafalanForm(){this.showForm="hafalan"},exportToPDF(){const a=new gt["default"];a.setFontSize(16);const t="LAPORAN HAFALAN SANTRI",e=a.getStringUnitWidth(t)*a.internal.getFontSize()/a.internal.scaleFactor,r=(a.internal.pageSize.width-e)/2;a.text(t,r,10),this.santri.foto&&a.addImage(this.santri.foto,"JPEG",10,20,50,50),a.setFontSize(12);const s=20,n=15;a.text("Profil Santri: "+this.santri.nama,n,s),a.text("Kelas: "+this.santri.kelas,n,s+10),a.text("Jenis Kelamin: "+this.santri.jeniskelamin,n,s+20),a.text("Umur: "+this.santri.umur,n,s+30),a.text("Alamat: "+this.santri.alamat,n,s+40),a.text("No. Telp: "+this.santri.noTelp,n,s+50);let i=80;const o=["Tanggal","Surat Hafalan","Ayat/Halaman","Penilaian","Keterangan"],l=[];this.laporanHafalanItems.forEach(a=>{const t=[a.tanggal,a.surat,a.ayatHalaman,a.penilaian,a.keterangan];l.push(t)}),a.autoTable(o,l,{startY:i}),a.save(`profil-santri-${this.santri.nama}.pdf`)},getHafalanData(a){const t=V["a"].firestore();t.collection("hafalans").where("santriId","==",a).get().then(a=>{a.forEach(a=>{const t=a.data();t.isNew=!1,t.id=a.id,this.laporanHafalanItems.push(t)})}).catch(a=>{console.error("Error getting Hafalan data:",a)})},addLaporanHafalanItem(){this.laporanHafalanItems.push({isNew:!0,tanggal:this.currentDate,surat:"",ayatHalaman:"",penilaian:"",keterangan:""})},deleteLaporanHafalanItem(a,t){if(this.laporanHafalanItems[a].isNew)this.laporanHafalanItems.splice(a,1);else{const e=V["a"].firestore();e.collection("hafalans").doc(t).delete().then(()=>{this.laporanHafalanItems.splice(a,1)}).catch(a=>{S.a.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat menghapus data Hafalan"}),console.error("Error deleting Hafalan data:",a)})}},goBack(){this.$router.go(-1)},saveChanges(){"profil"===this.showForm?this.saveSantri():"hafalan"===this.showForm&&this.saveHafalan()},saveSantri(){const a=V["a"].firestore(),t=this.$route.params.santriId;a.collection("santris").doc(t).set(this.santri,{merge:!0}).then(()=>{S.a.fire({icon:"success",title:"Berhasil",text:"Data Santri berhasil disimpan"}),this.$router.go(0)}).catch(a=>{S.a.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat menyimpan data Santri"}),console.error("Error saving Santri data:",a)})},saveHafalan(){const a=V["a"].firestore(),t=this.$route.params.santriId;this.laporanHafalanItems.forEach(e=>{e.isNew?a.collection("hafalans").add({santriId:t,tanggal:e.tanggal,surat:e.surat,ayatHalaman:e.ayatHalaman,penilaian:e.penilaian,keterangan:e.keterangan}).then(()=>{S.a.fire({icon:"success",title:"Berhasil",text:"Data Hafalan berhasil disimpan"}),this.$router.go(0)}).catch(a=>{S.a.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat menyimpan data Hafalan"}),console.error("Error saving Hafalan data:",a)}):a.collection("hafalans").doc(e.id).update({tanggal:e.tanggal,surat:e.surat,ayatHalaman:e.ayatHalaman,penilaian:e.penilaian,keterangan:e.keterangan}).then(()=>{S.a.fire({icon:"success",title:"Berhasil",text:"Data Hafalan berhasil diperbarui"}),this.$router.go(0)})})}}}),kt=bt,yt=(e("3abf"),Object(i["a"])(kt,vt,ft,!1,null,null,null)),wt=yt.exports;y()(yt,{VBtn:$["a"],VCard:N["a"],VCol:B["a"],VContainer:I["a"],VIcon:Fa["a"],VImg:H["a"],VRow:U["a"],VSelect:sa["a"],VTextField:Y["a"]}),delete fa.a.Icon.Default.prototype._getIconUrl,fa.a.Icon.Default.mergeOptions({iconRetinaUrl:e("584d"),iconUrl:e("6397"),shadowUrl:e("e2b9")}),r["a"].use(p["a"]);const xt=[{path:"/",component:_,children:[{path:"",redirect:"/login"},{path:"/login",component:Z},{path:"/register",component:ia},{path:"/home",component:P},{path:"/dashboard",component:Ea,meta:{userRole:"admin"}},{path:"/list-karyawan",component:Ja},{path:"/list-santri",name:"list-santri",component:nt},{path:"/hafalan",component:ht},{path:"/profilesantri/:santriId",name:"profilesantri",component:wt},{path:"/list-absen",component:Xa},{path:"/karyawan",component:ma},{path:"/checkin",component:ya},{path:"/checkout",component:Da}]}],Ct=new p["a"]({routes:xt});Ct.beforeEach((a,t,e)=>{const r=localStorage.getItem("isLoggedIn"),s=localStorage.getItem("userRole");a.matched.some(a=>a.meta.requiresAuth)?r?"admin"!==s?e("/home"):e():e("/login"):e()});var _t=Ct;e("b7ef");const Tt={namespaced:!0,state:{identity:null,titleHierarchy:null},getters:{identity:a=>a.identity,titleHierarchy:a=>a.titleHierarchy},mutations:{identity:(a,t)=>a.identity=t,titleHierarchy:(a,t)=>a.titleHierarchy=t}};var Dt=Tt;const Lt={namespaced:!0,state:{purchaseOrder:{},goodsReceipt:{},issueToProduction:{},receiptFromProduction:{},salesOrder:{},deliveryOrder:{},stockAdjustment:{},stockTransfer:{},manualIssue:{},manualReceipt:{}},getters:{purchaseOrder:a=>a.purchaseOrder,goodsReceipt:a=>a.goodsReceipt,issueToProduction:a=>a.issueToProduction,receiptFromProduction:a=>a.receiptFromProduction,salesOrder:a=>a.salesOrder,deliveryOrder:a=>a.deliveryOrder,stockAdjustment:a=>a.stockAdjustment,stockTransfer:a=>a.stockTransfer,manualIssue:a=>a.manualIssue,manualReceipt:a=>a.manualReceipt},mutations:{purchaseOrder:(a,t)=>a.purchaseOrder=t,goodsReceipt:(a,t)=>a.goodsReceipt=t,issueToProduction:(a,t)=>a.issueToProduction=t,receiptFromProduction:(a,t)=>a.receiptFromProduction=t,salesOrder:(a,t)=>a.salesOrder=t,deliveryOrder:(a,t)=>a.deliveryOrder=t,stockAdjustment:(a,t)=>a.stockAdjustment=t,stockTransfer:(a,t)=>a.stockTransfer=t,manualIssue:(a,t)=>a.manualIssue=t,manualReceipt:(a,t)=>a.manualReceipt=t}};var St=Lt;r["a"].use(f["a"]);const Vt=new f["a"].Store({modules:{auth:{namespaced:!0,...Dt,state:{userRole:""},mutations:{setUserRole(a,t){a.userRole=t}},getters:{getUserRole:a=>a.userRole}},filter:St}});var jt=Vt,Kt={methods:{vuexFromStorage(a,t){var e;jt.commit(`${a}/${t}`,null!==(e=this.storageLoad(`${a}-${t}`))&&void 0!==e?e:"")},getErrorMessage(a){var t,e,r,s;return null!==a&&void 0!==a&&null!==(t=a.response)&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.message?null===a||void 0===a||null===(r=a.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message:null!==a&&void 0!==a&&a.message?null===a||void 0===a?void 0:a.message:a},getErrorStatusCode(a){var t,e;return null!==a&&void 0!==a&&null!==(t=a.response)&&void 0!==t&&t.status?null===a||void 0===a||null===(e=a.response)||void 0===e?void 0:e.status:"999"},showErrorMessage(a){this.$root.snackbar.showError(a)},today(){return(new Date).toISOString().slice(0,10)},round(a,t=2){return isNaN(a)||isNaN(t)?"":parseFloat(a.toFixed(t))},formatDate(a){return a?(a=new Date(a),a.toLocaleDateString("id-ID")):""},formatNumber(a){return isNaN(a)?"0":a?Number(a).toLocaleString("id-ID"):"0"},parseDate(a){return a.substring(0,10)},parseNumber(a){return isNaN(a)?0:a?Number(a):0},encryptString(a){if(!a)return"";const t=btoa(unescape(encodeURIComponent(a))),e=t.split("").reverse().join(""),r=btoa(e);return r},decryptString(a){if(!a)return"";const t=decodeURIComponent(escape(atob(a))),e=t.split("").reverse().join(""),r=atob(e);return r},storageSave(a,t,e){const r=JSON.stringify(e),s=this.encryptString(r),n=this.encryptString(`${a}-${t}`);localStorage.setItem(n,s)},storageLoad(a){try{const t=this.encryptString(a),e=localStorage.getItem(t),r=this.decryptString(e);return JSON.parse(r)}catch{return null}},storageRemove(a){const t=this.encryptString(a);localStorage.removeItem(t)},sessionSave(a,t){const e=JSON.stringify(t);sessionStorage.setItem(a,e)},sessionLoad(a){try{const t=sessionStorage.getItem(a);return JSON.parse(t)}catch{return null}},sessionRemove(a){sessionStorage.removeItem(a)},downloadExcel(a,t){if(a){const e=Ia.a.utils.json_to_sheet(a),r=Ia.a.utils.book_new();Ia.a.utils.book_append_sheet(r,e,"Data"),Ia.a.writeFile(r,t)}},downloadFile(a,t){const e=document.createElement("a");e.href=a,e.setAttribute("download",t),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e)},downloadBlob(a,t){const e=document.createElement("a"),r=URL.createObjectURL(new Blob([a]));e.setAttribute("href",r),e.setAttribute("download",t),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e)},createRecord(a,t){a.push(t)},updateRecord(a,t){let e=a.filter(a=>a.id===t.id)[0];const r=a.indexOf(e);a.splice(r,1,t)},deleteRecord(a,t){const e=a.filter(a=>a.id===t)[0],r=a.indexOf(e);a.splice(r,1)},toast(a,t){t||(t="default"),this.$toast.open({message:a,type:t,duration:5e3,dismissible:!0})}}},Et=e("b079"),$t=e.n(Et);e("4238");r["a"].use($t.a),r["a"].use(u["a"]),r["a"].config.productionTip=!1;const Nt={apiKey:"AIzaSyAdqS6loC6Ry3USA2q8ji8vlmunm85tZt0",authDomain:"dovepin-project-5faf2.firebaseapp.com",projectId:"dovepin-project-5faf2",storageBucket:"dovepin-project-5faf2.appspot.com",messagingSenderId:"740700379866",appId:"1:740700379866:web:36faa076b5487512b0a3e3"};q["a"].initializeApp(Nt);const At=q["a"].firestore(),Bt=q["a"].storage();r["a"].mixin(Kt),new r["a"]({router:_t,vuetify:m,store:jt,render:a=>a(c)}).$mount("#app")},5977:function(a,t,e){},"64a4":function(a,t,e){"use strict";e("3031")},6757:function(a,t,e){"use strict";e("6cd6")},"6cd6":function(a,t,e){},7387:function(a,t,e){},"7e83":function(a,t,e){"use strict";e("b383")},"800e":function(a,t,e){"use strict";e("5977")},ab48:function(a,t,e){"use strict";e("4bb3")},b044:function(a,t,e){"use strict";e("27b0")},b383:function(a,t,e){},bf9c:function(a,t,e){"use strict";e("7387")},c576:function(a,t,e){"use strict";e("0a91")},f5db:function(a,t,e){"use strict";e("fd8d")},fd8d:function(a,t,e){}});
//# sourceMappingURL=app.8cbdadae.js.map